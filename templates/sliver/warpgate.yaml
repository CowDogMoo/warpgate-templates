# Warpgate Template: sliver
# Converted from Packer HCL template
# Generated by: warpgate convert packer

metadata:
    name: sliver
    version: 1.0.0
    description: This repository contains Packer templates to build **Sliver C2**
    author: Jayson Grace <jayson.e.grace@gmail.com>
    license: MIT
    tags:
        - security
        - red-team
    requires:
        warpgate: '>=1.0.0'
name: sliver
version: latest
base:
    image: ubuntu:25.04
    pull: true
provisioners:
    - type: shell
      inline:
        - echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections
        - apt-get update
        - apt-get install -y --no-install-recommends python3 python3-pip sudo
        - rm -rf /var/lib/apt/lists/*
    - type: ansible
      playbook_path: ${ARSENAL_REPO_PATH}/playbooks/sliver/sliver.yml
      galaxy_file: ${ARSENAL_REPO_PATH}/requirements.yml
      extra_vars:
        ansible_shell_executable: /bin/bash
    - type: shell
      inline:
        - rm -rf /home/${var.user}/.ansible
        - rm -rf /tmp/ansible*
        - rm -rf /tmp/packer*
        - sync
        - chmod 755 /opt/sliver/sliver-server 2>/dev/null || true
        - chmod 755 /opt/sliver/sliver-client 2>/dev/null || true
        - rm -f /home/${var.user}/.bash_history
        - rm -f /home/${var.user}/.wget-hsts
        - history -c 2>/dev/null || true
        - exit 0
targets:
    - type: container
      platforms:
        - linux/amd64
        - linux/arm64
      tags:
        - latest
    - type: ami
      region: us-east-1
      instance_type: t3.micro
      volume_size: 50
